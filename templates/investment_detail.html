<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Opportunities</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        /* Investment Opportunities - Enhanced UI/UX Styles */

        :root {
        --primary-color: #3a86ff;
        --primary-dark: #2a76ef;
        --secondary-color: #8338ec;
        --success-color: #38b000;
        --warning-color: #ffbe0b;
        --danger-color: #ff006e;
        --dark-color: #212529;
        --light-color: #f8f9fa;
        --gray-100: #f8f9fa;
        --gray-200: #e9ecef;
        --gray-300: #dee2e6;
        --gray-400: #ced4da;
        --gray-500: #adb5bd;
        --gray-600: #6c757d;
        --gray-700: #495057;
        --gray-800: #343a40;
        --transition: all 0.3s ease;
        }

        /* Base Styles */
        body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f9fafb;
        color: var(--gray-700);
        line-height: 1.6;
        }

        .container {
        padding: 2rem 1rem;
        }

        /* Header Styles */
        .page-header {
        margin-bottom: 2rem;
        border-bottom: 1px solid var(--gray-200);
        padding-bottom: 1rem;
        }

        .page-header h2 {
        font-weight: 600;
        color: var(--gray-800);
        }

        /* Filter Section */
        .filters {
        background-color: white;
        border-radius: 12px;
        padding: 1.75rem;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
        position: sticky;
        top: 20px;
        }

        .filters h5 {
        font-weight: 600;
        color: var(--gray-800);
        margin-bottom: 1.5rem;
        font-size: 1.1rem;
        }

        .form-group {
        margin-bottom: 1.5rem;
        }

        .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--gray-700);
        font-size: 0.9rem;
        }

        .form-control {
        border-radius: 8px;
        border: 1px solid var(--gray-300);
        padding: 0.625rem 1rem;
        font-size: 0.95rem;
        transition: var(--transition);
        }

        .form-control:focus {
        border-color: var(--success-color);
        box-shadow: 0 0 0 0.2rem rgba(58, 134, 255, 0.15);
        }

        .form-control-range {
        height: 10px;
        }

        /* Buttons */
        .btn {
        border-radius: 8px;
        font-weight: 500;
        padding: 0.625rem 1.25rem;
        font-size: 0.95rem;
        transition: var(--transition);
        }

        .btn-success {
        background-color: var(--success-color);
        border-color: var(--success-color);
        }

        .btn-success:hover, .btn-success:focus {
        background-color: var(--success-dark);
        border-color: var(--success-dark);
        }

        .btn-outline-success {
        border-color: var(--success-color);
        color: var(--success-color);
        }

        .btn-outline-success:hover, .btn-outline-success:focus {
        background-color: var(--success-color);
        color: white;
        }

        .btn-outline-secondary {
        border-color: var(--gray-400);
        color: var(--gray-600);
        }

        .btn-outline-secondary:hover, .btn-outline-secondary:focus {
        background-color: var(--gray-200);
        color: var(--gray-700);
        }

        /* Investment Cards */
        .investment-card {
        border: none;
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.35s, box-shadow 0.35s;
        height: 100%;
        background-color: white;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        min-height: 500px;
        margin-bottom: 2rem;
        }

        .investment-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }

        .investment-img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        }

        .card-body {
        padding: 1.75rem;
        }

        .card-title {
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--gray-800);
        font-size: 1.15rem;
        }

        .card-text {
        font-size: 0.9rem;
        line-height: 1.5;
        color: var(--gray-600);
        margin-bottom: 1rem;
        }

        /* Badges */
        .badges {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1rem;
        }

        .badge {
        padding: 0.4rem 0.75rem;
        border-radius: 50px;
        font-weight: 500;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        }

        .badge-info {
        background-color: var(--success-color);
        color: white;
        }

        .badge-secondary {
        background-color: var(--dark-color);
        color: white;
        }

        .badge-success {
        background-color: var(--success-color);
        color: white;
        }

        .badge-dark {
        background-color: var(--gray-600);
        color: white;
        }

        /* Progress Bar */
        .progress {
        height: 8px;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
        border-radius: 50px;
        background-color: var(--gray-200);
        overflow: hidden;
        }

        .progress-bar {
        transition: width 1s ease;
        color: success-color;
        }

        /* Card Metadata */
        .investment-meta {
        display: flex;
        justify-content: space-between;
        margin-top: 1.25rem;
        color: var(--gray-600);
        font-size: 0.85rem;
        }

        .meta-item {
        display: flex;
        align-items: center;
        }

        .meta-item i {
        margin-right: 5px;
        font-size: 0.9rem;
        color: var(--gray-500);
        }

        /* Loading and Empty State */
        #loading {
        padding: 2rem;
        }

        .spinner-border {
        width: 3rem;
        height: 3rem;
        }

        #empty-state {
        padding: 3rem 1rem;
        }

        #empty-state h4 {
        font-weight: 600;
        margin: 1rem 0;
        color: var(--gray-700);
        }

        #empty-state p {
        max-width: 400px;
        margin: 0 auto 1.5rem auto;
        }

        /* Category Filter Pills */
        .category-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 2rem;
        }

        .category-pill {
        background-color: white;
        border: 1px solid var(--gray-300);
        border-radius: 50px;
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
        font-weight: 500;
        color: var(--gray-700);
        cursor: pointer;
        transition: var(--transition);
        }

        .category-pill:hover {
        border-color: var(--success-color);
        color: var(--success-color);
        }

        .category-pill.active {
        background-color: var(--success-color);
        border-color: var(--success-color);
        color: white;
        }

        /* Mobile Filters */
        #mobile-filters-btn {
        display: none;
        width: 100%;
        margin-bottom: 1rem;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
        .container {
            padding: 1rem;
        }
        
        .col-md-6 {
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        
        .row {
            margin-left: -0.5rem;
            margin-right: -0.5rem;
        }
        }

        @media (max-width: 768px) {
        #filters-container {
            display: none;
            margin-bottom: 1rem;
        }
        
        #mobile-filters-btn {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #mobile-filters-btn i {
            margin-right: 0.5rem;
        }
        
        .filters {
            position: static;
        }
        
        .category-pills {
            overflow-x: auto;
            flex-wrap: nowrap;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .category-pill {
            white-space: nowrap;
        }
        
        .card-body {
            padding: 1.25rem;
        }
        }

        /* Animation for cards */
        @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
        }

        .investment-card {
        animation: fadeIn 0.4s ease-out;
        }

        /* Custom checkbox and radio styles */
        input[type="checkbox"], input[type="radio"] {
        width: 18px;
        height: 18px;
        margin-right: 8px;
        accent-color: var(--success-color);
        }

        /* Tooltip styles */
        .tooltip-inner {
        background-color: var(--dark-color);
        border-radius: 6px;
        padding: 0.5rem 0.75rem;
        }

        .bs-tooltip-auto[x-placement^=top] .arrow::before, 
        .bs-tooltip-top .arrow::before {
        border-top-color: var(--dark-color);
        }
    </style>
</head>
<body>
    {% include "navbar.html" %}

    <div class="container">

        <div class="page-header d-flex justify-content-between align-items-center">
            <h2>Startup Investment Project</h2>
            <button id="mobile-filters-btn" class="btn btn-outline-success d-md-none" data-toggle="collapse" data-target="#filters-container">
                <i class="fas fa-filter"></i> Filters
            </button>
        </div>

        <div class="row">
            <!-- Filters -->
            <div class="col-md-3 mb-4">
                <div id="filters-container" class="filters">
                    <h5 class="mb-3">Filter By</h5>
                    
                    <div class="form-group">
                        <label for="category-filter">Category</label>
                        <select class="form-control" id="category-filter">
                            <option value="">All Categories</option>
                            <option value="Tech">Tech</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Finance">Finance</option>
                            <option value="Green Energy">Green Energy</option>
                            <option value="Consumer">Consumer</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="stage-filter">Stage</label>
                        <select class="form-control" id="stage-filter">
                            <option value="">All Stages</option>
                            <option value="Seed">Seed</option>
                            <option value="Series A">Series A</option>
                            <option value="Series B">Series B</option>
                            <option value="Growth">Growth</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="status-filter">Status</label>
                        <select class="form-control" id="status-filter">
                            <option value="">All Status</option>
                            <option value="funding">Active Funding</option>
                            <option value="closed">Closed</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="region-filter">Region</label>
                        <select class="form-control" id="region-filter">
                            <option value="">All Regions</option>
                            <option value="North America">North America</option>
                            <option value="Europe">Europe</option>
                            <option value="Asia">Asia</option>
                            <option value="Africa">Africa</option>
                            <option value="South America">South America</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="min-investment">Minimum Investment</label>
                        <input type="range" class="form-control-range" id="min-investment" min="1000" max="100000" step="1000">
                        <div class="d-flex justify-content-between">
                            <span>$1,000</span>
                            <span id="min-investment-value">$10,000</span>
                            <span>$100,000</span>
                        </div>
                    </div>
                    
                    <button id="apply-filters" class="btn btn-success btn-block mt-3">Apply Filters</button>
                    <button id="reset-filters" class="btn btn-outline-secondary btn-block mt-2">Reset</button>
                </div>
            </div>
            
            <!-- Investment List -->
            <div class="col-md-9">
                <div class="row" id="investments-list"></div>
                
                <!-- Loading Spinner -->
                <div id="loading" class="text-center my-5">
                    <div class="spinner-border text-success" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
                
                <!-- Empty State -->
                <div id="empty-state" class="text-center my-5 d-none">
                    <img src="/api/placeholder/200/200" alt="No investments found" class="mb-3">
                    <h4>No investments match your filters</h4>
                    <p class="text-muted">Try adjusting your filters or check back later for new opportunities.</p>
                    <button id="clear-filters" class="btn btn-outline-success">Clear All Filters</button>
                </div>
            </div>
        </div>
    </div>
    
        

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // Investment Opportunities - Enhanced Functionality

document.addEventListener('DOMContentLoaded', function() {
    // Cached DOM elements
    const filterElements = {
        categoryFilter: document.getElementById('category-filter'),
        stageFilter: document.getElementById('stage-filter'),
        statusFilter: document.getElementById('status-filter'),
        regionFilter: document.getElementById('region-filter'),
        minInvestment: document.getElementById('min-investment'),
        minInvestmentValue: document.getElementById('min-investment-value'),
        applyFiltersBtn: document.getElementById('apply-filters'),
        resetFiltersBtn: document.getElementById('reset-filters'),
        clearFiltersBtn: document.getElementById('clear-filters'),
        mobileFiltersBtn: document.getElementById('mobile-filters-btn'),
        filtersContainer: document.getElementById('filters-container'),
        loadingSpinner: document.getElementById('loading'),
        emptyState: document.getElementById('empty-state'),
        investmentsList: document.getElementById('investments-list')
    };

    // Create category pills
    const categories = [
        { id: 'all', label: 'All Categories', active: true },
        { id: 'Tech', label: 'Tech', active: false },
        { id: 'Healthcare', label: 'Healthcare', active: false },
        { id: 'Finance', label: 'Finance', active: false },
        { id: 'Green Energy', label: 'Green Energy', active: false },
        { id: 'Consumer', label: 'Consumer', active: false }
    ];

    // Create and append category pills
    function createCategoryPills() {
        const pillsContainer = document.createElement('div');
        pillsContainer.className = 'category-pills';
        pillsContainer.id = 'category-pills';
        
        categories.forEach(category => {
            const pill = document.createElement('div');
            pill.className = `category-pill ${category.active ? 'active' : ''}`;
            pill.setAttribute('data-category', category.id);
            pill.textContent = category.label;
            
            pill.addEventListener('click', function() {
                // Update active state
                document.querySelectorAll('.category-pill').forEach(p => {
                    p.classList.remove('active');
                });
                this.classList.add('active');
                
                // Update filter dropdown to match
                if (category.id === 'all') {
                    filterElements.categoryFilter.value = '';
                } else {
                    filterElements.categoryFilter.value = category.id;
                }
                
                // Apply filters
                filterInvestments();
            });
            
            pillsContainer.appendChild(pill);
        });
        
        // Insert pills before the investment list
        const listContainer = filterElements.investmentsList.parentElement;
        listContainer.insertBefore(pillsContainer, filterElements.investmentsList);
    }

    // Initialize investment data store
    let allInvestments = [];
    let filteredInvestments = [];

    // Update minimum investment slider value
    filterElements.minInvestment.addEventListener('input', function() {
        filterElements.minInvestmentValue.textContent = '$' + parseInt(this.value).toLocaleString();
    });

    // Show loading spinner
    filterElements.loadingSpinner.style.display = 'block';

    // Fetch investment data
    fetch('/api/investment')
        .then(res => res.json())
        .then(data => {
            // Hide loading spinner
            filterElements.loadingSpinner.style.display = 'none';
            
            // Store all investments
            allInvestments = data.investments;
            filteredInvestments = [...allInvestments];
            
            // Create category pills
            createCategoryPills();
            
            // Render investments
            renderInvestments(filteredInvestments);
        })
        .catch(error => {
            filterElements.loadingSpinner.style.display = 'none';
            filterElements.emptyState.classList.remove('d-none');
            document.querySelector('#empty-state p').textContent = 'An error occurred while loading investments. Please try again later.';
            console.error('Error fetching investments:', error);
        });

    // Filter investments based on current filter values
    function filterInvestments() {
        const selectedCategory = filterElements.categoryFilter.value;
        const selectedStage = filterElements.stageFilter.value;
        const selectedStatus = filterElements.statusFilter.value;
        const selectedRegion = filterElements.regionFilter.value;
        const minInvestmentValue = parseInt(filterElements.minInvestment.value);
        
        filteredInvestments = allInvestments.filter(inv => {
            // Check category
            if (selectedCategory && inv.category !== selectedCategory) {
                return false;
            }
            
            // Check stage
            if (selectedStage && inv.stage !== selectedStage) {
                return false;
            }
            
            // Check status
            if (selectedStatus && inv.status !== selectedStatus) {
                return false;
            }
            
            // Check region
            if (selectedRegion && inv.region !== selectedRegion) {
                return false;
            }
            
            // Check minimum investment
            if (inv.min_investment < minInvestmentValue) {
                return false;
            }
            
            return true;
        });
        
        // Render filtered investments
        renderInvestments(filteredInvestments);
    }

    // Render investments list
    function renderInvestments(investments) {
        filterElements.investmentsList.innerHTML = '';
        
        if (investments.length === 0) {
            filterElements.emptyState.classList.remove('d-none');
            return;
        }
        
        filterElements.emptyState.classList.add('d-none');
        
        investments.forEach((inv, index) => {
            // Add staggered animation delay
            const animationDelay = index * 0.1;
            
            // Calculate funding progress percentage
            const progressPercentage = Math.min(100, Math.round((inv.total_invested / inv.target_investment) * 100));
            
            const card = document.createElement('div');
            card.className = 'col-md-6 col-lg-4 mb-4';
            card.style.animationDelay = `${animationDelay}s`;
            
            card.innerHTML = `
                <div class="card investment-card">
                    <img src="${inv.image}" class="investment-img" alt="${inv.title}" 
                         onerror="this.src='/api/placeholder/400/200'; this.onerror=null;">
                    <div class="card-body">
                        <h5 class="card-title">${inv.title}</h5>
                        <p class="card-text text-muted">${inv.description ? inv.description.substring(0, 100) + '...' : 'No description available.'}</p>
                        
                        <div class="badges">
                            <span class="badge badge-info">${inv.category}</span>
                            <span class="badge badge-secondary">${inv.stage}</span>
                            <span class="badge badge-${inv.status === 'funding' ? 'success' : 'dark'}">${inv.status === 'funding' ? 'Active Funding' : 'Closed'}</span>
                        </div>
                        
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: ${progressPercentage}%" 
                                aria-valuenow="${progressPercentage}" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        
                        <div class="d-flex justify-content-between mb-3">
                            <small class="text-muted">$${inv.total_invested.toLocaleString()} raised</small>
                            <small class="text-muted">${progressPercentage}% of $${inv.target_investment.toLocaleString()}</small>
                        </div>
                        
                        <div class="investment-meta">
                            <div class="meta-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${inv.region}</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-dollar-sign"></i>
                                <span>Min: $${inv.min_investment.toLocaleString()}</span>
                            </div>
                        </div>
                        
                        <button onclick="window.location='investment_detail/${inv.id}'" class="btn btn-outline-success btn-block mt-3">
                            <i class="fas fa-info-circle mr-1"></i> 
                        </button>
                    </div>
                </div>
            `;
            
            filterElements.investmentsList.appendChild(card);
        });
        
        // Initialize tooltips
        if (typeof $ !== 'undefined') {
            $('[data-toggle="tooltip"]').tooltip();
        }
    }

    // Apply filters button click handler
    filterElements.applyFiltersBtn.addEventListener('click', function() {
        filterInvestments();
        
        // Update category pills to match selected category
        const selectedCategory = filterElements.categoryFilter.value;
        document.querySelectorAll('.category-pill').forEach(pill => {
            const pillCategory = pill.getAttribute('data-category');
            if ((pillCategory === 'all' && !selectedCategory) || pillCategory === selectedCategory) {
                pill.classList.add('active');
            } else {
                pill.classList.remove('active');
            }
        });
        
        // Close mobile filters if open
        if (window.innerWidth < 768) {
            $(filterElements.filtersContainer).collapse('hide');
        }
    });

    // Reset filters button click handler
    filterElements.resetFiltersBtn.addEventListener('click', function() {
        // Reset all filters
        filterElements.categoryFilter.value = '';
        filterElements.stageFilter.value = '';
        filterElements.statusFilter.value = '';
        filterElements.regionFilter.value = '';
        filterElements.minInvestment.value = '10000';
        filterElements.minInvestmentValue.textContent = '$10,000';
        
        // Reset category pills
        document.querySelectorAll('.category-pill').forEach(pill => {
            if (pill.getAttribute('data-category') === 'all') {
                pill.classList.add('active');
            } else {
                pill.classList.remove('active');
            }
        });
    });

    // Clear filters button click handler
    filterElements.clearFiltersBtn.addEventListener('click', function() {
        filterElements.resetFiltersBtn.click();
        filterElements.applyFiltersBtn.click();
    });
    
    // Mobile filters toggle
    if (filterElements.mobileFiltersBtn) {
        filterElements.mobileFiltersBtn.addEventListener('click', function() {
            $(filterElements.filtersContainer).collapse('toggle');
        });
    }
    
    // Category filter dropdown change handler
    filterElements.categoryFilter.addEventListener('change', function() {
        // Update category pills to match
        const selectedCategory = this.value;
        document.querySelectorAll('.category-pill').forEach(pill => {
            const pillCategory = pill.getAttribute('data-category');
            if ((pillCategory === 'all' && !selectedCategory) || pillCategory === selectedCategory) {
                pill.classList.add('active');
            } else {
                pill.classList.remove('active');
            }
        });
    });
});
    </script>
</body>
</html>